{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "resources": {
      "type": "object",
      "properties": {
        "requests": {
          "type": "object",
          "properties": {
            "cpu": { "type": "string", "enum": ["250m"] },
            "memory": { "type": "string", "enum": ["250Mi"] }
          }
        },
        "limits": {
          "type": "object",
          "properties": {
            "cpu": { "type": "string", "enum": ["500m"] },
            "memory": { "type": "string", "enum": ["500Mi"] }
          }
        }
      }
    },
    "supersetNode": {
      "type": "object",
      "properties": {
        "connections": {
          "type": "object",
          "properties": {
            "redis_host": { "type": "string", "enum": ["{{ .Release.Name }}-redis-headless-service"] },
            "redis_port": { "type": "string", "enum": ["6379"] },
            "redis_user": { "type": "string", "enum": [""] },
            "redis_cache_db": { "type": "string", "enum": ["1"] },
            "redis_celery_db": { "type": "string", "enum": ["0"] },
            "redis_ssl": {
              "type": "object",
              "properties": {
                "enabled": { "type": "boolean", "enum": [false] },
                "ssl_cert_reqs": { "type": "string", "enum": ["CERT_NONE"] }
              }
            },
            "db_host": { "type": "string", "enum": ["{{ .Release.Name }}-postgres"] },
            "db_port": { "type": "string", "enum": ["5432"] },
            "db_user": { "type": "string", "enum": ["superset_user"] },
            "db_pass": { "type": "string", "enum": ["superset"] },
            "db_name": { "type": "string", "enum": ["superset"] }
          }
        }
      }
    },
    "service": {
      "type": "object",
      "properties": {
        "name": { "type": "string", "enum": ["superset-node-service"] },
        "image": { "type": "string", "enum": ["apachesuperset.docker.scarf.sh/apache/superset:4.1.1"] },
        "minReplicas": { "type": "integer", "enum": [1] },
        "httpPort": { "type": "integer", "enum": [8088] },
        "hpa_enable": { "type": "boolean", "enum": [true] },
        "hpaCPU": { "type": "string", "enum": ["80"] },
        "hpaMemory": { "type": "string", "enum": ["80"] },
        "env": {
          "type": "object",
          "properties": {
            "SUPERSET_PORT": { "type": "integer", "enum": [8088] }
          }
        },
        "heartbeatURL": { "type": "string", "enum": ["/health"] },
        "livenessProbe": {
          "type": "object",
          "properties": {
            "enable": { "type": "boolean", "enum": [true] },
            "initialDelaySeconds": { "type": "integer", "enum": [15] },
            "timeoutSeconds": { "type": "integer", "enum": [1] },
            "failureThreshold": { "type": "integer", "enum": [60] },
            "periodSeconds": { "type": "integer", "enum": [5] },
            "successThreshold": { "type": "integer", "enum": [1] }
          }
        },
        "readinessProbe": {
          "type": "object",
          "properties": {
            "enable": { "type": "boolean", "enum": [true] },
            "initialDelaySeconds": { "type": "integer", "enum": [15] },
            "timeoutSeconds": { "type": "integer", "enum": [1] },
            "failureThreshold": { "type": "integer", "enum": [3] },
            "periodSeconds": { "type": "integer", "enum": [15] },
            "successThreshold": { "type": "integer", "enum": [1] }
          }
        },
        "minCPU": { "type": "string", "enum": ["250m"] },
        "minMemory": { "type": "string", "enum": ["250Mi"] },
        "maxCPU": { "type": "string", "enum": ["500m"] },
        "maxMemory": { "type": "string", "enum": ["500Mi"] }
      }
    },
    "postgres": {
      "type": "object",
      "properties": {
        "enabled": { "type": "boolean", "enum": [true] },
        "postgresRootPassword": { "type": "string", "enum": ["superset"] },
        "services": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": { "type": "string", "enum": ["superset"] },
              "password": { "type": "string", "enum": ["superset"] },
              "database": { "type": "string", "enum": ["superset"] }
            }
          }
        }
      }
    },
    "redis": {
      "type": "object",
      "properties": {
        "enabled": { "type": "boolean", "enum": [true] }
      }
    }
  }
}